# Release Preparation: v1.0.0

**Date:** 2025-11-30
**Branch:** release/v1.0.0
**Previous Version:** None (first release)
**New Version:** v1.0.0

---

## Release Type

**FIRST PUBLIC RELEASE** - Making GitHub repository public.

---

## Changes Summary

### Features (All New)

- **Image Generation Tab** - Text-to-image and image-to-image generation
  - Multi-turn conversations for iterative refinement
  - Reference image upload for context
  - SVG attachment support (sent as text context)
  - Aspect ratio selection (1:1, 16:9, 9:16, 4:3, 3:4)
  - Seed control for reproducible results
  - Enhance Prompt button for AI-powered prompt improvement
  - Per-turn token usage and cost display

- **SVG Generation Tab** - Vector graphics generation using text models
  - Multi-turn conversations for refinement
  - Reference image upload
  - Multi-size preview (32px, 64px, 128px thumbnails)
  - Code view with copy functionality
  - Per-turn token usage and cost display

- **Model Support**
  - Image: Gemini 2.5 Flash (Nano Banana), GPT-5 Image, FLUX.2 Pro/Flex
  - SVG: GPT-5.1 Codex (default), Gemini Pro 3.0, Claude Opus 4.5

- **Token Usage Tracking** - Real-time token counts and cost display per generation turn

- **Settings**
  - OpenRouter API key management (secure storage)
  - Model selection for Image and SVG
  - Output directory configuration

### Security

- **Secure API Key Storage** - API keys stored in OS keychain via VS Code SecretStorage

### Architecture

- Clean Architecture with TypeScript
- Message Envelope pattern for extension-webview communication
- React-based webview UI with VS Code theming
- Three-Suite AI Infrastructure (Text, Image, SVG orchestrators)

---

## Pre-Release Fixes

### Critical Fix Applied

**Unhandled Promise Rejection in WebviewViewProvider.ts**

- **Location:** `src/application/providers/WebviewViewProvider.ts:55-65`
- **Issue:** Async message handler wasn't awaited, causing silent failures
- **Fix:** Added async/await wrapper with try-catch and error logging

```typescript
// Before (buggy)
webviewView.webview.onDidReceiveMessage(
  (message) => this.messageHandler?.handleMessage(message),
  ...
);

// After (fixed)
webviewView.webview.onDidReceiveMessage(
  async (message) => {
    try {
      await this.messageHandler?.handleMessage(message);
    } catch (error) {
      this.logger.error('Error handling webview message', error);
    }
  },
  ...
);
```

---

## Audit Results

### npm audit
- **Vulnerabilities:** 0

### Code Review
- **Critical:** 1 (fixed)
- **Warnings:** 7 (documented in tech debt)
- **Info:** 4 (documented in tech debt)

See `.todo/architecture-debt/v1.0-code-review-findings.md` for full details.

---

## Test Results
- **Tests:** 85 passing
- **Test Suites:** 10
- **Build:** Successful (webpack warnings about bundle size only)

---

## Files Modified in Release Branch

- `CHANGELOG.md` - Version bump 0.1.0 → 1.0.0
- `docs/CHANGELOG-DETAILED.md` - Version bump 0.1.0 → 1.0.0
- `src/application/providers/WebviewViewProvider.ts` - Critical fix for unhandled promise
- `.todo/architecture-debt/v1.0-code-review-findings.md` - New tech debt documentation

---

## Package Configuration

- `package.json` version: 1.0.0
- `preview` flag: true (kept for first release)
- Publisher: OkeyLanders
- Categories: Machine Learning, Visualization, Other

---

## Next Steps

- [ ] Commit changes to release branch
- [ ] Package vsix for manual testing
- [ ] User manual testing
- [ ] Merge to main
- [ ] Create GitHub release with vsix
- [ ] Publish to marketplace (when requested)

---

## Commit History on Release Branch

1. Version bump to 1.0.0 in changelogs
2. Critical fix: unhandled promise rejection
3. Tech debt documentation
